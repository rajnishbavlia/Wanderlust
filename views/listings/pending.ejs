<% layout('/layouts/boilerplate') %>
<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3>Pending Listings</h3>
    <a class="btn btn-outline-secondary" href="/listings">Back to Listings</a>
  </div>

  <% if (!pendingListings || pendingListings.length === 0) { %>
    <div class="alert alert-info">No pending listings right now.</div>
  <% } else { %>
    <div class="list-group">
      <% pendingListings.forEach(listing => { %>
        <div class="list-group-item d-flex justify-content-between align-items-center">
          <div>
            <div class="fw-semibold"><%= listing.title %></div>
            <div class="text-muted small">
              <%= listing.location || 'Unknown location' %>, <%= listing.country || '' %>
              <% if (listing.author) { %>
                Â· Submitted by <%= listing.author.username || listing.author.email || 'User' %>
              <% } %>
            </div>
          </div>
          <form action="/listings/<%= listing._id %>/approve" method="post" class="d-inline">
            <button class="btn btn-dark btn-sm">Approve</button>
          </form>
          <form action="/listings/<%= listing._id %>/reject" method="post" class="d-inline ms-2">
            <button class="btn btn-danger btn-sm">Reject</button>
          </form>
        </div>
      <% }); %>
    </div>
  <% } %>
</div>
